{"version":3,"sources":["components/basket/basket-item/basket-item.module.css","components/product/product.module.css","components/reviews/review-form/review-form.module.css","components/basket/basket.module.css","components/button/button.module.css","components/reviews/review/review.module.css","components/rate/rate.module.css","components/banner/banner.module.css","components/loader/loader.module.css","components/tabs/tabs.module.css","components/currency-switcher/currency-switcher.module.css","components/order-success/order-success.module.css","components/order-error/order-error.module.css","components/menu/menu.module.css","components/reviews/reviews.module.css","components/reviews/reviews-animation.module.css","components/header/header.module.css","redux/constants.js","redux/selectors.js","redux/actions.js","components/loader/loader.js","icons/plus.svg","icons/minus.svg","icons/delete.svg","components/button/button.js","contexts/currency-context.js","components/product/product.js","hooks/use-convert.js","components/basket/basket-item/basket-item.js","contexts/user-context.js","components/basket/basket.js","icons/star.svg","components/menu/menu.js","components/rate/rate.js","components/reviews/review/review.js","components/reviews/review-form/review-form.js","hooks/use-form.js","components/reviews/reviews.js","components/banner/banner.jpg","components/banner/banner.js","components/tabs/tabs.js","components/restaurant/restaurant.js","components/restaurants/restaurants.js","icons/logo.svg","components/currency-switcher/currency-switcher.js","components/header/header.js","components/order-success/order-success.js","components/order-error/order-error.js","components/app/app.js","redux/middleware/api.js","redux/reducer/order.js","redux/utils.js","redux/reducer/restaurants.js","redux/reducer/products.js","redux/reducer/reviews.js","redux/reducer/users.js","history.js","redux/reducer/index.js","redux/store.js","redux/middleware/generateId.js","redux/middleware/logger.js","index.js"],"names":["module","exports","INCREMENT","DECREMENT","REMOVE","ADD_REVIEW","CHANGE_RESTAURANT","LOAD_RESTAURANTS","LOAD_PRODUCTS","LOAD_REVIEWS","LOAD_USERS","CREATE_ORDER","REQUEST","SUCCESS","FAILURE","restaurantsSelector","state","restaurants","entities","productsSelector","products","orderSelector","order","reviewsSelector","reviews","restaurantsLoadingSelector","loading","restaurantsLoadedSelector","loaded","orderLoadingSelector","orderErrorSelector","error","productsLoadingSelector","props","restId","productsLoadedSelector","reviewsLoadingSelector","reviewsLoadedSelector","usersLoadingSelector","users","usersLoadedSelector","restaurantsListSelector","createSelector","Object","values","restaurantSelector","id","productSelector","amountSelector","restaurantsIdsByProductsSelector","flatMap","rest","menu","map","productId","reduce","acc","orderProductsSelector","restaurantsIds","keys","filter","product","amount","subtotal","price","totalSelector","orderProducts","reviewWitUserSelector","review","user","userId","name","averageRatingSelector","restaurant","ratings","rating","Math","round","length","orderDataSelector","entries","increment","type","decrement","apiUrl","Loader","_path","className","styles","loader","bounce1","bounce2","_excluded","_extends","assign","target","i","arguments","source","key","prototype","hasOwnProperty","call","apply","this","_objectWithoutProperties","excluded","sourceKeys","indexOf","_objectWithoutPropertiesLoose","getOwnPropertySymbols","sourceSymbolKeys","propertyIsEnumerable","SvgPlus","_ref","svgRef","title","titleId","fill","height","viewBox","width","xmlns","ref","d","ForwardRef","SvgMinus","SvgDelete","icons","plus","PlusIcon","minus","MinusIcon","delete","DeleteIcon","Button","icon","children","primary","secondary","small","block","Icon","cn","button","currencyContext","createContext","Provider","currenciesMap","USD","label","rate","sign","EUR","RUB","UAH","currencies","CurrencyProvider","useState","currency","setCurrency","value","convert","toFixed","Convert","useContext","connect","dispatch","content","description","ingredients","join","counter","count","buttons","onClick","useConvert","ownProps","remove","basketItem","to","info","userContext","UserProvider","UserConsumer","Consumer","mapDispatchToProps","createOrder","getState","a","postData","CallAPI","push","total","basket","TransitionGroup","CSSTransition","timeout","classNames","hr","itemStyles","path","Menu","loadProductsIfNeeded","loadProducts","prevProps","prevState","setState","Component","SvgStar","Rate","onChange","Array","_","star","checked","unknown","clickable","undefined","Review","text","comment","defaultProps","mapStateToProps","INITIAL_VALUES","onSubmit","generateId","addReview","initialValues","setValues","setValue","ev","reset","handlers","useForm","reviewForm","addReviewTitle","preventDefault","reviewFormItem","placeholder","message","rateWrap","publish","loadReviews","fetch","then","res","json","data","replace","loadUsers","reviewsLoaded","usersLoaded","useEffect","animationStyles","Banner","heading","banner","src","img","alt","caption","Tabs","tabs","url","tab","activeClassName","active","averageRating","_path2","_path3","_path4","_path5","_path6","_path7","_ellipse","_ellipse2","loadRestaurants","match","useRouteMatch","tabId","params","SvgLogo","cx","cy","rx","ry","CurrencySwitcher","e","switcher","switcherBtn","Header","header","OrderSuccess","page","actions","errorText","t","App","setName","exact","from","component","Basket","Restaurants","OrderError","createPostParams","method","headers","body","JSON","stringify","initialState","arrToMap","arr","item","activeId","produce","draft","action","reviewId","history","createBrowserHistory","basename","combineReducers","router","connectRouter","enhancer","applyMiddleware","thunk","routerMiddleware","store","next","ok","uuid","createStore","reducer","composeWithDevTools","window","ReactDOM","render","document","getElementById"],"mappings":"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","file":"static/js/main.3c9fbefb.chunk.js","sourcesContent":["// extracted by mini-css-extract-plugin\nmodule.exports = {\"basketItem\":\"basket-item_basketItem__Ei069\",\"counter\":\"basket-item_counter__3ae4-\",\"count\":\"basket-item_count__1PMoO\",\"price\":\"basket-item_price__hwmVy\",\"button\":\"basket-item_button__wPafo\",\"name\":\"basket-item_name__3ZEsE\",\"info\":\"basket-item_info__8g5h5\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"product\":\"product_product__3kfjq\",\"content\":\"product_content__3SJnw\",\"title\":\"product_title__3Wk4c\",\"description\":\"product_description__1l8Ij\",\"price\":\"product_price__2AtTn\",\"counter\":\"product_counter__234_5\",\"count\":\"product_count__3rWw_\",\"buttons\":\"product_buttons__1d8XO\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"reviewForm\":\"review-form_reviewForm__m1lEM\",\"reviewFormItem\":\"review-form_reviewFormItem__ZWkl1\",\"rateWrap\":\"review-form_rateWrap__xFtWF\",\"addReviewTitle\":\"review-form_addReviewTitle__Cx8mn\",\"message\":\"review-form_message__3m5LZ\",\"publish\":\"review-form_publish__hWPD6\",\"submitButton\":\"review-form_submitButton__2NfSL\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"basket\":\"basket_basket__1xrL0\",\"hr\":\"basket_hr__20D1o\",\"title\":\"basket_title__1NOhF\",\"button\":\"basket_button__2fmr9\",\"loading\":\"basket_loading__2M6q_\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"button\":\"button_button__3_GL1\",\"primary\":\"button_primary__17m96\",\"secondary\":\"button_secondary__3v91q\",\"small\":\"button_small__14mQu\",\"block\":\"button_block__yiIqr\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"review\":\"review_review__3NLiZ\",\"content\":\"review_content__tNRaI\",\"name\":\"review_name__2_t_D\",\"comment\":\"review_comment__1XcdB\",\"rate\":\"review_rate__3UeVh\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"star\":\"rate_star__2lA_N\",\"checked\":\"rate_checked__aRwx4\",\"unknown\":\"rate_unknown__3B6wx\",\"clickable\":\"rate_clickable__7OGYH\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"banner\":\"banner_banner__-R6DW\",\"img\":\"banner_img__39USH\",\"caption\":\"banner_caption__1Rp9z\",\"heading\":\"banner_heading__3MvRh\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"loader\":\"loader_loader__31U88\",\"bounce1\":\"loader_bounce1__3tnG1\",\"bounce2\":\"loader_bounce2__31li3\",\"sk-bounce\":\"loader_sk-bounce__LRB5V\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"tabs\":\"tabs_tabs__3hOO2\",\"tab\":\"tabs_tab__xx9z8\",\"active\":\"tabs_active__3IcAw\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"switcher\":\"currency-switcher_switcher__3xoG1\",\"switcherBtn\":\"currency-switcher_switcherBtn__2Bs0p\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"page\":\"order-success_page__zBJrG\",\"actions\":\"order-success_actions__TT0Hz\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"page\":\"order-error_page__2e1xU\",\"actions\":\"order-error_actions__1Lvpr\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"menu\":\"menu_menu__2lX_i\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"reviews\":\"reviews_reviews__n9n4q\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"enter\":\"reviews-animation_enter__1O-kf\",\"enterActive\":\"reviews-animation_enterActive__3DPD1\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"header\":\"header_header__v9FKw\"};","export const INCREMENT = 'INCREMENT';\nexport const DECREMENT = 'DECREMENT';\nexport const REMOVE = 'REMOVE';\nexport const ADD_REVIEW = 'ADD_REVIEW';\n\nexport const CHANGE_RESTAURANT = 'CHANGE_RESTAURANT';\n\nexport const LOAD_RESTAURANTS = 'LOAD_RESTAURANTS';\nexport const LOAD_PRODUCTS = 'LOAD_PRODUCTS';\nexport const LOAD_REVIEWS = 'LOAD_REVIEWS';\nexport const LOAD_USERS = 'LOAD_USERS';\nexport const CREATE_ORDER = 'CREATE_ORDER';\n\nexport const REQUEST = '_REQUEST';\nexport const SUCCESS = '_SUCCESS';\nexport const FAILURE = '_FAILURE';\n","import { createSelector } from 'reselect';\n\nconst restaurantsSelector = (state) => state.restaurants.entities;\nconst productsSelector = (state) => state.products.entities;\nconst orderSelector = (state) => state.order.entities;\nconst reviewsSelector = (state) => state.reviews.entities;\nconst usersSelector = (state) => state.users.entities;\n\nexport const activeRestaurantIdSelector = (state) => state.restaurants.activeId;\nexport const restaurantsLoadingSelector = (state) => state.restaurants.loading;\nexport const restaurantsLoadedSelector = (state) => state.restaurants.loaded;\n\nexport const orderLoadingSelector = (state) => state.order.loading;\nexport const orderErrorSelector = (state) => state.order.error;\n\nexport const productsLoadingSelector = (state, props) =>\n  state.products.loading[props.restId];\nexport const productsLoadedSelector = (state, props) =>\n  state.products.loaded[props.restId];\n\nexport const reviewsLoadingSelector = (state, props) =>\n  state.reviews.loading[props.restId];\nexport const reviewsLoadedSelector = (state, props) =>\n  state.reviews.loaded[props.restId];\n\nexport const usersLoadingSelector = (state) => state.users.loading;\nexport const usersLoadedSelector = (state) => state.users.loaded;\n\nexport const restaurantsListSelector = createSelector(\n  restaurantsSelector,\n  Object.values\n);\n\nexport const restaurantSelector = (state, { id }) =>\n  restaurantsSelector(state)[id];\nexport const productSelector = (state, { id }) => productsSelector(state)[id];\nexport const reviewSelector = (state, { id }) => reviewsSelector(state)[id];\nexport const amountSelector = (state, { id }) => orderSelector(state)[id] || 0;\n\nconst restaurantsIdsByProductsSelector = createSelector(\n  restaurantsListSelector,\n  (restaurants) =>\n    restaurants\n      .flatMap((rest) =>\n        rest.menu.map((productId) => ({ productId, restId: rest.id }))\n      )\n      .reduce(\n        (acc, { productId, restId }) => ({ ...acc, [productId]: restId }),\n        {}\n      )\n);\n\nexport const orderProductsSelector = createSelector(\n  orderSelector,\n  productsSelector,\n  restaurantsIdsByProductsSelector,\n  (order, products, restaurantsIds) =>\n    Object.keys(order)\n      .filter((productId) => order[productId] > 0)\n      .map((productId) => products[productId])\n      .map((product) => ({\n        product,\n        amount: order[product.id],\n        subtotal: order[product.id] * product.price,\n        restId: restaurantsIds[product.id],\n      }))\n);\n\nexport const totalSelector = createSelector(\n  [orderProductsSelector],\n  (orderProducts) =>\n    orderProducts.reduce((acc, { subtotal }) => acc + subtotal, 0)\n);\n\nexport const reviewWitUserSelector = createSelector(\n  reviewSelector,\n  usersSelector,\n  (review, users) => ({\n    ...review,\n    user: users[review.userId]?.name,\n  })\n);\n\nexport const averageRatingSelector = createSelector(\n  reviewsSelector,\n  restaurantSelector,\n  (reviews, restaurant) => {\n    const ratings = restaurant.reviews.map((id) => reviews[id]?.rating || 0);\n    return Math.round(\n      ratings.reduce((acc, rating) => acc + rating, 0) / ratings.length\n    );\n  }\n);\n\nexport const orderDataSelector = createSelector(orderSelector, (order) =>\n  Object.entries(order).map(([id, amount]) => ({ id, amount }))\n);\n","import { replace, push } from 'connected-react-router';\nimport {\n  DECREMENT,\n  INCREMENT,\n  REMOVE,\n  ADD_REVIEW,\n  LOAD_RESTAURANTS,\n  CHANGE_RESTAURANT,\n  LOAD_PRODUCTS,\n  LOAD_REVIEWS,\n  LOAD_USERS,\n  REQUEST,\n  SUCCESS,\n  FAILURE,\n  CREATE_ORDER,\n} from './constants';\n\nimport {\n  usersLoadingSelector,\n  usersLoadedSelector,\n  reviewsLoadingSelector,\n  reviewsLoadedSelector,\n  orderDataSelector,\n} from './selectors';\n\nexport const increment = (id) => ({ type: INCREMENT, id });\nexport const decrement = (id) => ({ type: DECREMENT, id });\nexport const remove = (id) => ({ type: REMOVE, id });\n\nexport const changeRestaurant = (activeId) => ({\n  type: CHANGE_RESTAURANT,\n  activeId,\n});\n\nexport const addReview = (review, restId) => ({\n  type: ADD_REVIEW,\n  review,\n  restId,\n  generateId: ['reviewId', 'userId'],\n});\n\nconst apiUrl =\n  'https://raw.githubusercontent.com/icasinteva/react-2021-10-08/refs/heads/master/src';\n\nexport const loadRestaurants = () => ({\n  type: LOAD_RESTAURANTS,\n  CallAPI: `${apiUrl}/restaurants.json`,\n});\nexport const loadProducts = (restId) => ({\n  type: LOAD_PRODUCTS,\n  CallAPI: `${apiUrl}/products.json?id=${restId}`,\n  restId,\n});\n\nconst _loadUsers = () => ({\n  type: LOAD_USERS,\n  CallAPI: `${apiUrl}/users.json`,\n});\n\nexport const loadReviews = (restId) => async (dispatch, getState) => {\n  const state = getState();\n  const loading = reviewsLoadingSelector(state, { restId });\n  const loaded = reviewsLoadedSelector(state, { restId });\n\n  if (loading || loaded) return;\n  dispatch({ type: LOAD_REVIEWS + REQUEST, restId });\n\n  try {\n    const data = await fetch(`${apiUrl}/reviews.json?id=${restId}`).then(\n      (res) => res.json()\n    );\n    dispatch({ type: LOAD_REVIEWS + SUCCESS, restId, data });\n  } catch (error) {\n    dispatch({ type: LOAD_REVIEWS + FAILURE, restId, error });\n    dispatch(replace('/error'));\n  }\n};\n\nexport const loadUsers = () => async (dispatch, getState) => {\n  const state = getState();\n  const loading = usersLoadingSelector(state);\n  const loaded = usersLoadedSelector(state);\n\n  if (loading || loaded) return;\n\n  dispatch(_loadUsers());\n};\n\nexport const createOrder = () => async (dispatch, getState) => {\n  const state = getState();\n  const postData = orderDataSelector(state);\n\n  try {\n    await dispatch({\n      type: CREATE_ORDER,\n      CallAPI: `${apiUrl}/order`,\n      postData,\n    });\n    dispatch(push('/order-success'));\n  } catch {\n    dispatch(push('/order-error'));\n  }\n};\n","import styles from './loader.module.css';\n\nfunction Loader() {\n  return (\n    <div className={styles.loader}>\n      <div className={styles.bounce1} />\n      <div className={styles.bounce2} />\n    </div>\n  );\n}\n\nexport default Loader;\n","var _path;\n\nvar _excluded = [\"title\", \"titleId\"];\n\nfunction _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\nimport * as React from \"react\";\n\nfunction SvgPlus(_ref, svgRef) {\n  var title = _ref.title,\n      titleId = _ref.titleId,\n      props = _objectWithoutProperties(_ref, _excluded);\n\n  return /*#__PURE__*/React.createElement(\"svg\", _extends({\n    fill: \"none\",\n    height: 12,\n    viewBox: \"0 0 18 17\",\n    width: 14,\n    xmlns: \"http://www.w3.org/2000/svg\",\n    ref: svgRef,\n    \"aria-labelledby\": titleId\n  }, props), title ? /*#__PURE__*/React.createElement(\"title\", {\n    id: titleId\n  }, title) : null, _path || (_path = /*#__PURE__*/React.createElement(\"path\", {\n    d: \"m.92445 10.2v-3.21h6.12v-6.390001h3.90005v6.390001h6.12v3.21h-6.12v6.48h-3.90005v-6.48z\",\n    fill: \"#fff\"\n  })));\n}\n\nvar ForwardRef = /*#__PURE__*/React.forwardRef(SvgPlus);\nexport default __webpack_public_path__ + \"static/media/plus.51894487.svg\";\nexport { ForwardRef as ReactComponent };","var _path;\n\nvar _excluded = [\"title\", \"titleId\"];\n\nfunction _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\nimport * as React from \"react\";\n\nfunction SvgMinus(_ref, svgRef) {\n  var title = _ref.title,\n      titleId = _ref.titleId,\n      props = _objectWithoutProperties(_ref, _excluded);\n\n  return /*#__PURE__*/React.createElement(\"svg\", _extends({\n    fill: \"none\",\n    height: 4,\n    viewBox: \"0 0 10 4\",\n    width: 10,\n    xmlns: \"http://www.w3.org/2000/svg\",\n    ref: svgRef,\n    \"aria-labelledby\": titleId\n  }, props), title ? /*#__PURE__*/React.createElement(\"title\", {\n    id: titleId\n  }, title) : null, _path || (_path = /*#__PURE__*/React.createElement(\"path\", {\n    d: \"m.764347 3.59v-3.39h8.670003v3.39z\",\n    fill: \"#fff\"\n  })));\n}\n\nvar ForwardRef = /*#__PURE__*/React.forwardRef(SvgMinus);\nexport default __webpack_public_path__ + \"static/media/minus.d7a76cd0.svg\";\nexport { ForwardRef as ReactComponent };","var _path;\n\nvar _excluded = [\"title\", \"titleId\"];\n\nfunction _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\nimport * as React from \"react\";\n\nfunction SvgDelete(_ref, svgRef) {\n  var title = _ref.title,\n      titleId = _ref.titleId,\n      props = _objectWithoutProperties(_ref, _excluded);\n\n  return /*#__PURE__*/React.createElement(\"svg\", _extends({\n    xmlns: \"http://www.w3.org/2000/svg\",\n    width: \"10px\",\n    height: \"10px\",\n    viewBox: \"0 0 348.333 348.334\",\n    ref: svgRef,\n    \"aria-labelledby\": titleId\n  }, props), title ? /*#__PURE__*/React.createElement(\"title\", {\n    id: titleId\n  }, title) : null, _path || (_path = /*#__PURE__*/React.createElement(\"path\", {\n    d: \"M336.559,68.611L231.016,174.165l105.543,105.549c15.699,15.705,15.699,41.145,0,56.85 c-7.844,7.844-18.128,11.769-28.407,11.769c-10.296,0-20.581-3.919-28.419-11.769L174.167,231.003L68.609,336.563 c-7.843,7.844-18.128,11.769-28.416,11.769c-10.285,0-20.563-3.919-28.413-11.769c-15.699-15.698-15.699-41.139,0-56.85 l105.54-105.549L11.774,68.611c-15.699-15.699-15.699-41.145,0-56.844c15.696-15.687,41.127-15.687,56.829,0l105.563,105.554 L279.721,11.767c15.705-15.687,41.139-15.687,56.832,0C352.258,27.466,352.258,52.912,336.559,68.611z\",\n    fill: \"#fff\"\n  })));\n}\n\nvar ForwardRef = /*#__PURE__*/React.forwardRef(SvgDelete);\nexport default __webpack_public_path__ + \"static/media/delete.732828ea.svg\";\nexport { ForwardRef as ReactComponent };","import cn from 'classnames';\nimport PropTypes from 'prop-types';\n\nimport styles from './button.module.css';\n\nimport { ReactComponent as PlusIcon } from '../../icons/plus.svg';\nimport { ReactComponent as MinusIcon } from '../../icons/minus.svg';\nimport { ReactComponent as DeleteIcon } from '../../icons/delete.svg';\n\nconst icons = {\n  plus: PlusIcon,\n  minus: MinusIcon,\n  delete: DeleteIcon,\n};\n\nconst Button = ({\n  icon,\n  children,\n  primary = false,\n  secondary = false,\n  small = false,\n  block = false,\n  ...props\n}) => {\n  const Icon = icons[icon];\n  return (\n    <button\n      className={cn(styles.button, {\n        [styles.primary]: primary,\n        [styles.secondary]: secondary,\n        [styles.small]: small,\n        [styles.block]: block,\n      })}\n      {...props}\n    >\n      {Icon && <Icon />}\n      {children}\n    </button>\n  );\n};\n\nButton.propTypes = {\n  icon: PropTypes.string,\n  primary: PropTypes.bool,\n  secondary: PropTypes.bool,\n  small: PropTypes.bool,\n  block: PropTypes.bool,\n};\n\nexport default Button;\n","import { createContext, useState, useContext } from 'react';\n\nconst currencyContext = createContext();\nconst { Provider } = currencyContext;\n\nconst currenciesMap = {\n  USD: { label: 'USD', rate: 1, sign: '$' },\n  EUR: { label: 'EUR', rate: 1 / 1.15, sign: '' },\n  RUB: { label: 'RUB', rate: 72, sign: '' },\n  UAH: { label: 'UAH', rate: 26, sign: '' },\n};\n\nconst currencies = Object.entries(currenciesMap).map(([key, { label }]) => ({\n  key,\n  label,\n}));\n\nexport function CurrencyProvider({ children }) {\n  const [currency, setCurrency] = useState('USD');\n  const { rate, sign } = currenciesMap[currency];\n  const convert = (amount) => `${(rate * amount).toFixed(2)} ${sign}`;\n\n  return (\n    <Provider value={{ currencies, currency, setCurrency, convert }}>\n      {children}\n    </Provider>\n  );\n}\n\nexport function Convert({ value }) {\n  const { convert } = useContext(currencyContext);\n  return convert(value);\n}\n\nexport default currencyContext;\n","import { connect } from 'react-redux';\nimport PropTypes from 'prop-types';\nimport styles from './product.module.css';\nimport Button from '../button';\nimport { decrement, increment } from '../../redux/actions';\nimport { amountSelector, productSelector } from '../../redux/selectors';\nimport { Convert } from '../../contexts/currency-context';\n\nfunction Product({ product, amount, decrement, increment }) {\n  return (\n    <div className={styles.product} data-id=\"product\">\n      <div className={styles.content}>\n        <div>\n          <h4 className={styles.title}>{product.name}</h4>\n          <p className={styles.description}>{product.ingredients.join(', ')}</p>\n          <div className={styles.price}>\n            <Convert value={product.price} />\n          </div>\n        </div>\n        <div>\n          <div className={styles.counter}>\n            <div className={styles.count} data-id=\"product-amount\">\n              {amount}\n            </div>\n            <div className={styles.buttons}>\n              <Button\n                onClick={decrement}\n                icon=\"minus\"\n                data-id=\"product-decrement\"\n              />\n              <Button\n                onClick={increment}\n                icon=\"plus\"\n                data-id=\"product-increment\"\n              />\n            </div>\n          </div>\n        </div>\n      </div>\n    </div>\n  );\n}\n\nProduct.propTypes = {\n  product: PropTypes.shape({\n    name: PropTypes.string,\n    price: PropTypes.number,\n    ingredients: PropTypes.arrayOf(PropTypes.string.isRequired).isRequired,\n  }).isRequired,\n\n  // from connect\n  amount: PropTypes.number,\n  increment: PropTypes.func,\n  decrement: PropTypes.func,\n};\n\nconst mapStateToProps = (state, props) => ({\n  amount: amountSelector(state, props),\n  product: productSelector(state, props),\n});\n\nconst mapDispatchToProps = (dispatch, props) => ({\n  increment: () => dispatch(increment(props.id)),\n  decrement: () => dispatch(decrement(props.id)),\n});\n\nexport default connect(mapStateToProps, mapDispatchToProps)(Product);\n","import { useContext } from 'react';\nimport currencyContext from '../contexts/currency-context';\n\nexport function useConvert() {\n  const { convert } = useContext(currencyContext);\n  return convert;\n}\n","import { connect } from 'react-redux';\nimport cn from 'classnames';\nimport { Link } from 'react-router-dom';\nimport { increment, decrement, remove } from '../../../redux/actions';\nimport Button from '../../button';\nimport styles from './basket-item.module.css';\n\nimport { useConvert } from '../../../hooks/use-convert';\n\nfunction BasketItem({\n  product,\n  amount,\n  subtotal,\n  restId,\n  increment,\n  decrement,\n  remove,\n}) {\n  const convert = useConvert();\n  return (\n    <div className={styles.basketItem}>\n      <div className={styles.name}>\n        <Link to={`/restaurants/${restId}/menu`}>{product.name}</Link>\n      </div>\n      <div className={styles.info}>\n        <div className={styles.counter}>\n          <Button onClick={decrement} icon=\"minus\" secondary small />\n          <span className={styles.count}>{amount}</span>\n          <Button onClick={increment} icon=\"plus\" secondary small />\n        </div>\n        <p className={cn(styles.count, styles.price)}>{convert(subtotal)}</p>\n        <Button onClick={remove} icon=\"delete\" secondary small />\n      </div>\n    </div>\n  );\n}\n\nconst mapDispatchToProps = (dispatch, ownProps) => ({\n  increment: () => dispatch(increment(ownProps.product.id)),\n  decrement: () => dispatch(decrement(ownProps.product.id)),\n  remove: () => dispatch(remove(ownProps.product.id)),\n});\n\nexport default connect(null, mapDispatchToProps)(BasketItem);\n","import { createContext } from 'react';\n\nexport const userContext = createContext('Default user');\n\nexport const UserProvider = userContext.Provider;\nexport const UserConsumer = userContext.Consumer;\n","import { connect } from 'react-redux';\nimport { Link, Route, Switch } from 'react-router-dom';\nimport { CSSTransition, TransitionGroup } from 'react-transition-group';\n\nimport styles from './basket.module.css';\nimport './basket.css';\nimport itemStyles from './basket-item/basket-item.module.css';\nimport BasketItem from './basket-item';\nimport Button from '../button';\nimport Loader from '../loader';\nimport {\n  orderProductsSelector,\n  totalSelector,\n  orderLoadingSelector,\n} from '../../redux/selectors';\nimport { createOrder } from '../../redux/actions';\n\nimport { UserConsumer } from '../../contexts/user-context';\nimport { useConvert } from '../../hooks/use-convert';\n\nfunction Basket({\n  title = 'Basket',\n  total,\n  orderProducts,\n  createOrder,\n  loading,\n}) {\n  const convert = useConvert();\n  if (!total) {\n    return (\n      <div className={styles.basket}>\n        <h4 className={styles.title}>Select a meal from the list</h4>\n      </div>\n    );\n  }\n\n  return (\n    <div className={styles.basket}>\n      {loading && (\n        <div className={styles.loading}>\n          <Loader />\n        </div>\n      )}\n      <h4 className={styles.title}>\n        <UserConsumer>{({ name }) => `${name}'s ${title}`}</UserConsumer>\n      </h4>\n      <TransitionGroup>\n        {orderProducts.map(({ product, amount, subtotal, restId }) => (\n          <CSSTransition\n            key={product.id}\n            timeout={500}\n            classNames=\"basket-item\"\n          >\n            <BasketItem\n              product={product}\n              amount={amount}\n              subtotal={subtotal}\n              restId={restId}\n            />\n          </CSSTransition>\n        ))}\n      </TransitionGroup>\n      <hr className={styles.hr} />\n      <div className={itemStyles.basketItem}>\n        <div className={itemStyles.name}>\n          <p>Total</p>\n        </div>\n        <div className={itemStyles.info}>\n          <p>{convert(total)}</p>\n        </div>\n      </div>\n      <Switch>\n        <Route path=\"/checkout\">\n          <Button primary block onClick={createOrder}>\n            send order\n          </Button>\n        </Route>\n        <Route>\n          <Link to=\"/checkout\">\n            <Button primary block>\n              go to checkout\n            </Button>\n          </Link>\n        </Route>\n      </Switch>\n    </div>\n  );\n}\n\nconst mapStateToProps = (state) => {\n  return {\n    total: totalSelector(state),\n    orderProducts: orderProductsSelector(state),\n    loading: orderLoadingSelector(state),\n  };\n};\n\nconst mapDispatchToProps = { createOrder };\n\nexport default connect(mapStateToProps, mapDispatchToProps)(Basket);\n","var _path;\n\nvar _excluded = [\"title\", \"titleId\"];\n\nfunction _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\nimport * as React from \"react\";\n\nfunction SvgStar(_ref, svgRef) {\n  var title = _ref.title,\n      titleId = _ref.titleId,\n      props = _objectWithoutProperties(_ref, _excluded);\n\n  return /*#__PURE__*/React.createElement(\"svg\", _extends({\n    width: 16,\n    height: 16,\n    viewBox: \"0 0 16 16\",\n    fill: \"none\",\n    xmlns: \"http://www.w3.org/2000/svg\",\n    ref: svgRef,\n    \"aria-labelledby\": titleId\n  }, props), title ? /*#__PURE__*/React.createElement(\"title\", {\n    id: titleId\n  }, title) : null, _path || (_path = /*#__PURE__*/React.createElement(\"path\", {\n    d: \"M8 12.8395L3.04225 16L4.35681 10.0741L0 6.08395L5.74648 5.57037L8 0L10.2535 5.57037L16 6.08395L11.6432 10.0741L12.9577 16L8 12.8395Z\"\n  })));\n}\n\nvar ForwardRef = /*#__PURE__*/React.forwardRef(SvgStar);\nexport default __webpack_public_path__ + \"static/media/star.152e560e.svg\";\nexport { ForwardRef as ReactComponent };","import { Component } from 'react';\nimport { connect } from 'react-redux';\nimport PropTypes from 'prop-types';\n\nimport { loadProducts } from '../../redux/actions';\nimport {\n  productsLoadingSelector,\n  productsLoadedSelector,\n} from '../../redux/selectors';\n\nimport Loader from '../loader';\nimport Product from '../product';\nimport Basket from '../basket';\n\nimport styles from './menu.module.css';\n\nclass Menu extends Component {\n  static propTypes = {\n    menu: PropTypes.arrayOf(PropTypes.string.isRequired).isRequired,\n  };\n\n  state = { error: null };\n\n  loadProductsIfNeeded = () => {\n    const { loadProducts, restId, loading, loaded } = this.props;\n    if (!loading && !loaded) {\n      loadProducts(restId);\n    }\n  };\n\n  componentDidMount() {\n    this.loadProductsIfNeeded();\n  }\n\n  componentDidUpdate(prevProps, prevState) {\n    if (prevProps.restId !== this.props.restId) {\n      this.loadProductsIfNeeded();\n    }\n  }\n\n  componentDidCatch(error) {\n    this.setState({ error });\n  }\n\n  render() {\n    const { menu, loading, loaded } = this.props;\n\n    if (loading) {\n      return <Loader />;\n    }\n\n    if (this.state.error || !loaded) {\n      return <p>     :(</p>;\n    }\n\n    return (\n      <div className={styles.menu}>\n        <div>\n          {menu.map((id) => (\n            <Product key={id} id={id} />\n          ))}\n        </div>\n        <div>\n          <Basket />\n        </div>\n      </div>\n    );\n  }\n}\n\nconst mapStateToProps = (state, props) => ({\n  loading: productsLoadingSelector(state, props),\n  loaded: productsLoadedSelector(state, props),\n});\n\nconst mapDispatchToProps = { loadProducts };\n\nexport default connect(mapStateToProps, mapDispatchToProps)(Menu);\n","import PropTypes from 'prop-types';\nimport cn from 'classnames';\n\nimport { ReactComponent as Star } from '../../icons/star.svg';\n\nimport styles from './rate.module.css';\n\nconst Rate = ({ value, onChange }) => (\n  <div>\n    {[...Array(5)].map((_, i) => (\n      <Star\n        key={i}\n        data-id={i <= value - 1 ? 'full-star' : 'empty-star'}\n        className={cn(styles.star, {\n          [styles.checked]: i <= value - 1,\n          [styles.unknown]: value === 0,\n          [styles.clickable]: !!onChange,\n        })}\n        onClick={onChange ? () => onChange(i + 1) : undefined}\n      />\n    ))}\n  </div>\n);\n\nRate.propTypes = {\n  value: PropTypes.number.isRequired,\n};\n\nexport default Rate;\n","import { connect } from 'react-redux';\nimport PropTypes from 'prop-types';\n\nimport Rate from '../../rate';\nimport styles from './review.module.css';\n\nimport { reviewWitUserSelector } from '../../../redux/selectors';\n\nconst Review = ({ user, text, rating }) => (\n  <div className={styles.review} data-id=\"review\">\n    <div className={styles.content}>\n      <div>\n        <h4 className={styles.name} data-id=\"review-user\">\n          {user}\n        </h4>\n        <p className={styles.comment} data-id=\"review-text\">\n          {text}\n        </p>\n      </div>\n      <div className={styles.rate}>\n        <Rate value={rating} />\n      </div>\n    </div>\n  </div>\n);\n\nReview.propTypes = {\n  user: PropTypes.string,\n  text: PropTypes.string,\n  rating: PropTypes.number.isRequired,\n};\n\nReview.defaultProps = {\n  user: 'Anonymous',\n};\n\n// const mapStateToProps = (state, props) => ({\n//   ...reviewWitUserSelector(state, props),\n// });\n\n// const mapStateToProps = (state, props) => reviewWitUserSelector(state, props);\n\nconst mapStateToProps = reviewWitUserSelector;\n\nexport default connect(mapStateToProps)(Review);\n","import { connect } from 'react-redux';\nimport PropTypes from 'prop-types';\n\nimport useForm from '../../../hooks/use-form';\nimport Rate from '../../rate';\nimport Button from '../../button';\n\nimport { addReview } from '../../../redux/actions';\n\nimport styles from './review-form.module.css';\n\nconst INITIAL_VALUES = { name: '', text: '', rating: 3 };\n\nconst ReviewForm = ({ onSubmit }) => {\n  const { values, handlers, reset } = useForm(INITIAL_VALUES);\n\n  const handleSubmit = (ev) => {\n    ev.preventDefault();\n    onSubmit(values);\n    reset();\n  };\n\n  return (\n    <div className={styles.reviewForm}>\n      <h4 className={styles.addReviewTitle}>Leave your review</h4>\n      <form onSubmit={handleSubmit}>\n        <div className={styles.reviewFormItem}>\n          <input\n            placeholder=\"Your name\"\n            className={styles.message}\n            {...handlers.name}\n          />\n        </div>\n        <div className={styles.reviewFormItem}>\n          <textarea\n            placeholder=\"Your review\"\n            className={styles.message}\n            {...handlers.text}\n          />\n        </div>\n        <div className={styles.rateWrap}>\n          <span>Rating: </span>\n          <span>\n            <Rate {...handlers.rating} />\n          </span>\n        </div>\n        <div className={styles.publish}>\n          <Button primary block>\n            PUBLISH REVIEW\n          </Button>\n        </div>\n      </form>\n    </div>\n  );\n};\n\nReviewForm.propTypes = {\n  restId: PropTypes.string.isRequired,\n  onSubmit: PropTypes.func.isRequired,\n};\n\nconst mapDispatchToProps = (dispatch, props) => ({\n  onSubmit: (review) => dispatch(addReview(review, props.restId)),\n});\n\nexport default connect(null, mapDispatchToProps)(ReviewForm);\n","import { useState } from 'react';\n\nexport default function useForm(initialValues = {}) {\n  const [values, setValues] = useState(initialValues);\n\n  const setValue = (key, value) => setValues({ ...values, [key]: value });\n\n  const onChange = (key) => (ev) =>\n    setValue(key, ev.target ? ev.target.value : ev);\n\n  return {\n    values,\n    reset: () => setValues(initialValues),\n    handlers: Object.keys(values).reduce(\n      (acc, key) => ({\n        ...acc,\n        [key]: { value: values[key], onChange: onChange(key) },\n      }),\n      {}\n    ),\n  };\n}\n","import { useEffect } from 'react';\nimport { connect } from 'react-redux';\nimport { TransitionGroup, CSSTransition } from 'react-transition-group';\nimport PropTypes from 'prop-types';\nimport Review from './review';\nimport Loader from '../loader';\nimport ReviewForm from './review-form';\nimport styles from './reviews.module.css';\nimport animationStyles from './reviews-animation.module.css';\n\nimport { loadReviews, loadUsers } from '../../redux/actions';\nimport {\n  reviewsLoadedSelector,\n  usersLoadedSelector,\n} from '../../redux/selectors';\n\nconst Reviews = ({\n  reviews,\n  restId,\n  loadReviews,\n  loadUsers,\n  usersLoaded,\n  reviewsLoaded,\n}) => {\n  useEffect(() => {\n    loadUsers();\n    loadReviews(restId);\n  }, [restId, loadReviews, loadUsers]);\n\n  if (!usersLoaded || !reviewsLoaded) return <Loader />;\n\n  return (\n    <div className={styles.reviews}>\n      <TransitionGroup>\n        {reviews.map((id) => (\n          <CSSTransition key={id} timeout={500} classNames={animationStyles}>\n            <Review id={id} />\n          </CSSTransition>\n        ))}\n      </TransitionGroup>\n      <ReviewForm restId={restId} />\n    </div>\n  );\n};\n\nReviews.propTypes = {\n  restId: PropTypes.string,\n  reviews: PropTypes.arrayOf(PropTypes.string.isRequired).isRequired,\n};\n\nconst mapStateToProps = (state, props) => ({\n  reviewsLoaded: reviewsLoadedSelector(state, props),\n  usersLoaded: usersLoadedSelector(state, props),\n});\n\nconst mapDispatchToProps = {\n  loadReviews,\n  loadUsers,\n};\n\nexport default connect(mapStateToProps, mapDispatchToProps)(Reviews);\n","export default __webpack_public_path__ + \"static/media/banner.40e0021b.jpg\";","import PropTypes from 'prop-types';\n\nimport styles from './banner.module.css';\n\nimport banner from './banner.jpg';\n\nconst Banner = ({ heading, children }) => (\n  <div className={styles.banner}>\n    <img src={banner} className={styles.img} alt=\"banner\" />\n    <div className={styles.caption}>\n      <h2 className={styles.heading}>{heading}</h2>\n      <div>{children}</div>\n    </div>\n  </div>\n);\n\nBanner.propTypes = {\n  heading: PropTypes.string,\n  children: PropTypes.element,\n};\n\nexport default Banner;\n","import { NavLink } from 'react-router-dom';\nimport PropTypes from 'prop-types';\n\nimport styles from './tabs.module.css';\n\nfunction Tabs({ tabs }) {\n  return (\n    <div className={styles.tabs}>\n      {tabs.map(({ label, url }) => (\n        <NavLink\n          to={url}\n          key={label}\n          className={styles.tab}\n          activeClassName={styles.active}\n        >\n          {label}\n        </NavLink>\n      ))}\n    </div>\n  );\n}\n\nTabs.propTypes = {\n  tabs: PropTypes.arrayOf(\n    PropTypes.shape({\n      url: PropTypes.string.isRequired,\n      label: PropTypes.string,\n    }).isRequired\n  ).isRequired,\n};\n\nexport default Tabs;\n","import { connect } from 'react-redux';\nimport { Redirect, Route, Switch } from 'react-router-dom';\nimport PropTypes from 'prop-types';\nimport Menu from '../menu';\nimport Reviews from '../reviews';\nimport Banner from '../banner';\nimport Rate from '../rate';\nimport Tabs from '../tabs';\nimport {\n  averageRatingSelector,\n  restaurantSelector,\n} from '../../redux/selectors';\n\nconst Restaurant = ({ restaurant, averageRating }) => {\n  const { id, name, menu, reviews } = restaurant;\n\n  const tabs = [\n    { label: 'Menu', url: `/restaurants/${id}/menu` },\n    { label: 'Reviews', url: `/restaurants/${id}/reviews` },\n  ];\n\n  return (\n    <div>\n      <Banner heading={name}>\n        <Rate value={averageRating} />\n      </Banner>\n      <Tabs tabs={tabs} />\n      <Switch>\n        <Route path=\"/restaurants/:restId/menu\">\n          <Menu menu={menu} restId={id} />\n        </Route>\n        <Route path=\"/restaurants/:restId/reviews\">\n          <Reviews reviews={reviews} restId={id} />\n        </Route>\n        <Redirect to=\"/restaurants/:restId/menu\" />\n      </Switch>\n    </div>\n  );\n};\n\nRestaurant.propTypes = {\n  restaurant: PropTypes.shape({\n    id: PropTypes.string.isRequired,\n    name: PropTypes.string,\n    menu: PropTypes.array,\n    reviews: PropTypes.array,\n  }).isRequired,\n  averageRating: PropTypes.number,\n};\n\nconst mapStateToProps = (state, props) => ({\n  restaurant: restaurantSelector(state, props),\n  averageRating: averageRatingSelector(state, props),\n});\n\nexport default connect(mapStateToProps)(Restaurant);\n","import { useEffect } from 'react';\nimport { connect } from 'react-redux';\nimport { Switch, Route, Redirect, useRouteMatch } from 'react-router-dom';\nimport PropTypes from 'prop-types';\nimport Restaurant from '../restaurant';\nimport Loader from '../loader';\nimport Tabs from '../tabs';\nimport {\n  restaurantsListSelector,\n  restaurantsLoadingSelector,\n  restaurantsLoadedSelector,\n} from '../../redux/selectors';\nimport { loadRestaurants } from '../../redux/actions';\n\nfunction Restaurants({ restaurants, loading, loaded, loadRestaurants }) {\n  useEffect(() => {\n    if (!loading && !loaded) loadRestaurants();\n  }, [loading, loaded, loadRestaurants]);\n\n  const match = useRouteMatch('/restaurants/:restId/:tabId');\n  const tabId = match?.params.tabId || '';\n\n  if (loading) return <Loader />;\n  if (!loaded) return 'No data :(';\n\n  const tabs = restaurants.map(({ id, name }) => ({\n    label: name,\n    url: `/restaurants/${id}/${tabId}`,\n  }));\n\n  return (\n    <div>\n      <Tabs tabs={tabs} />\n      <Switch>\n        <Route path=\"/restaurants/:restId\">\n          {({ match }) => <Restaurant id={match.params.restId} />}\n        </Route>\n        <Redirect to={`/restaurants/${restaurants[0]?.id}`} />\n      </Switch>\n    </div>\n  );\n}\n\nRestaurants.propTypes = {\n  restaurants: PropTypes.arrayOf(\n    PropTypes.shape({\n      id: PropTypes.string.isRequired,\n      name: PropTypes.string,\n    }).isRequired\n  ).isRequired,\n};\n\nconst mapStateToProps = (state) => ({\n  restaurants: restaurantsListSelector(state),\n  loading: restaurantsLoadingSelector(state),\n  loaded: restaurantsLoadedSelector(state),\n});\n\nconst mapDispatchToProps = {\n  loadRestaurants,\n};\n\nexport default connect(mapStateToProps, mapDispatchToProps)(Restaurants);\n","var _path, _path2, _path3, _path4, _path5, _path6, _path7, _ellipse, _ellipse2;\n\nvar _excluded = [\"title\", \"titleId\"];\n\nfunction _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\nimport * as React from \"react\";\n\nfunction SvgLogo(_ref, svgRef) {\n  var title = _ref.title,\n      titleId = _ref.titleId,\n      props = _objectWithoutProperties(_ref, _excluded);\n\n  return /*#__PURE__*/React.createElement(\"svg\", _extends({\n    width: 115,\n    height: 18,\n    viewBox: \"0 0 115 18\",\n    fill: \"none\",\n    xmlns: \"http://www.w3.org/2000/svg\",\n    ref: svgRef,\n    \"aria-labelledby\": titleId\n  }, props), title ? /*#__PURE__*/React.createElement(\"title\", {\n    id: titleId\n  }, title) : null, _path || (_path = /*#__PURE__*/React.createElement(\"path\", {\n    d: \"M60.2043 3.47599V0.761993H49.4633V17H52.4763V10.123H114.261V7.52399H52.4763V3.47599H60.2043Z\",\n    fill: \"white\"\n  })), _path2 || (_path2 = /*#__PURE__*/React.createElement(\"path\", {\n    d: \"M97.3408 0V16.238H103.482C108.266 16.238 111.095 13.455 111.095 8.257C111.095 2.438 107.507 0 103.666 0H97.3408ZM100.377 2.737H102.884C105.897 2.737 107.875 4.255 107.875 8.257C107.875 12.834 105.782 13.501 102.263 13.501H100.377V2.737Z\",\n    fill: \"white\"\n  })), _path3 || (_path3 = /*#__PURE__*/React.createElement(\"path\", {\n    d: \"M77.9976 8.556C77.9976 13.11 80.9416 17.066 85.7256 17.066C91.5676 17.066 93.5686 12.121 93.5686 8.441C93.5686 4.048 90.7396 0 85.7946 0C81.1026 0 77.9976 3.795 77.9976 8.556ZM81.1256 8.441C81.1256 4.876 83.1036 2.783 85.7716 2.783C88.9916 2.783 90.5096 5.796 90.5096 8.694C90.5096 12.374 88.2326 14.237 85.8176 14.237C82.3446 14.237 81.1256 10.971 81.1256 8.441Z\",\n    fill: \"#FFD25E\"\n  })), _path4 || (_path4 = /*#__PURE__*/React.createElement(\"path\", {\n    d: \"M61.6893 8.556C61.6893 13.11 64.6333 17.066 69.4173 17.066C75.2593 17.066 77.2603 12.121 77.2603 8.441C77.2603 4.048 74.4313 0 69.4863 0C64.7943 0 61.6893 3.795 61.6893 8.556ZM64.8173 8.441C64.8173 4.876 66.7953 2.783 69.4633 2.783C72.6833 2.783 74.2013 5.796 74.2013 8.694C74.2013 12.374 71.9243 14.237 69.5093 14.237C66.0363 14.237 64.8173 10.971 64.8173 8.441Z\",\n    fill: \"#FFD25E\"\n  })), _path5 || (_path5 = /*#__PURE__*/React.createElement(\"path\", {\n    d: \"M14.49 17L8.947 0.761993H5.497L0 17H3.266L4.209 13.826H10.304L11.247 17H14.49ZM9.499 11.158H5.014L7.268 3.68299L9.499 11.158Z\",\n    fill: \"white\"\n  })), _path6 || (_path6 = /*#__PURE__*/React.createElement(\"path\", {\n    d: \"M30.2451 17V0.761993H27.2551C27.2781 1.12999 27.6231 12.216 27.6231 12.216L20.4241 0.761993H17.6871V17H20.6541C20.6541 16.701 20.4701 5.61499 20.4701 5.61499L27.5771 17H30.2451Z\",\n    fill: \"white\"\n  })), _path7 || (_path7 = /*#__PURE__*/React.createElement(\"path\", {\n    d: \"M46.007 0.761993H42.603L39.061 7.47799L35.542 0.761993H32.092L37.52 10.583V17H40.533V10.583L46.007 0.761993Z\",\n    fill: \"white\"\n  })), _ellipse || (_ellipse = /*#__PURE__*/React.createElement(\"ellipse\", {\n    cx: 69.5,\n    cy: 8.5,\n    rx: 5.5,\n    ry: 6.5,\n    fill: \"#FFD25D\"\n  })), _ellipse2 || (_ellipse2 = /*#__PURE__*/React.createElement(\"ellipse\", {\n    cx: 85.5,\n    cy: 8.5,\n    rx: 5.5,\n    ry: 6.5,\n    fill: \"#FFD25D\"\n  })));\n}\n\nvar ForwardRef = /*#__PURE__*/React.forwardRef(SvgLogo);\nexport default __webpack_public_path__ + \"static/media/logo.65ad63c8.svg\";\nexport { ForwardRef as ReactComponent };","import { useContext } from 'react';\n\nimport styles from './currency-switcher.module.css';\nimport currencyContext from '../../contexts/currency-context';\n\nconst CurrencySwitcher = () => {\n  const { currency, currencies, setCurrency } = useContext(currencyContext);\n\n  const onChange = (e) => setCurrency(e.target.value);\n\n  return (\n    <fieldset className={styles.switcher}>\n      {currencies.map(({ key, label }) => (\n        <label key={key} className={styles.switcherBtn}>\n          <input\n            type=\"radio\"\n            value={key}\n            checked={key === currency}\n            onChange={onChange}\n          />\n          <span>{label}</span>\n        </label>\n      ))}\n    </fieldset>\n  );\n};\n\nexport default CurrencySwitcher;\n","import { Link } from 'react-router-dom';\nimport { ReactComponent as Logo } from '../../icons/logo.svg';\nimport styles from './header.module.css';\n\nimport CurrencySwitcher from '../currency-switcher';\n\nconst Header = () => {\n  return (\n    <header className={styles.header}>\n      <Link to=\"/restaurants\">\n        <Logo />\n      </Link>\n      <CurrencySwitcher />\n    </header>\n  );\n};\n\nexport default Header;\n","import { Link } from 'react-router-dom';\n\nimport Button from '../button';\n\nimport styles from './order-success.module.css';\n\nconst OrderSuccess = () => (\n  <h1 className={styles.page}>\n    <p>Congratulations! Your order has been successfully created!</p>\n    <div className={styles.actions}>\n      <Link to=\"/restaurants\">\n        <Button primary block>\n          back to restaurants\n        </Button>\n      </Link>\n    </div>\n  </h1>\n);\n\nexport default OrderSuccess;\n","import { connect } from 'react-redux';\nimport { Link } from 'react-router-dom';\n\nimport Button from '../button';\n\nimport { useConvert } from '../../hooks/use-convert';\n\nimport { orderErrorSelector } from '../../redux/selectors';\n\nimport styles from './order-error.module.css';\n\nconst OrderError = ({ error }) => {\n  const convert = useConvert();\n  const errorText = error?.replace(/\\$(\\d+)/gi, (_, t) => convert(t));\n\n  return (\n    <h1 className={styles.page}>\n      <p>{errorText}</p>\n      <div className={styles.actions}>\n        <Link to=\"/checkout\">\n          <Button primary block>\n            back to checkout\n          </Button>\n        </Link>\n      </div>\n    </h1>\n  );\n};\n\nexport default connect((state) => ({\n  error: orderErrorSelector(state),\n}))(OrderError);\n","import { Redirect, Route, Switch } from 'react-router-dom';\nimport Restaurants from '../restaurants';\nimport Header from '../header';\nimport Basket from '../basket';\nimport OrderSuccess from '../order-success';\nimport OrderError from '../order-error';\nimport { UserProvider } from '../../contexts/user-context';\nimport { useState } from 'react';\n\nconst App = () => {\n  const [name, setName] = useState('Andrey');\n  return (\n    <div>\n      <UserProvider value={{ name, setName }}>\n        <Header />\n        <Switch>\n          <Redirect exact from=\"/\" to=\"/restaurants\" />\n          <Route path=\"/checkout\" component={Basket} />\n          <Route path=\"/restaurants\" component={Restaurants} />\n          <Route path=\"/order-success\" component={OrderSuccess} />\n          <Route path=\"/order-error\" component={OrderError} />\n          <Route path=\"/error\" component={() => <h2>Error Page!</h2>} />\n          <Route component={() => <h2>404 - Not found :(</h2>} />\n        </Switch>\n      </UserProvider>\n    </div>\n  );\n};\n\nexport default App;\n","import { FAILURE, REQUEST, SUCCESS } from '../constants';\n\nconst createPostParams = (data) => ({\n  method: 'POST',\n  headers: { 'Content-Type': 'application/json' },\n  body: JSON.stringify(data),\n});\n\nexport default (store) => (next) => async (action) => {\n  if (!action.CallAPI) return next(action);\n\n  const { CallAPI, type, postData, ...rest } = action;\n  next({ ...rest, type: type + REQUEST });\n\n  try {\n    const params = postData ? createPostParams(postData) : {};\n\n    const res = await fetch(CallAPI, params);\n    const data = await res.json();\n\n    if (!res.ok) throw data;\n\n    next({ ...rest, type: type + SUCCESS, data });\n  } catch (error) {\n    throw next({ ...rest, type: type + FAILURE, error });\n  }\n};\n","import {\n  DECREMENT,\n  INCREMENT,\n  REMOVE,\n  CREATE_ORDER,\n  REQUEST,\n  SUCCESS,\n  FAILURE,\n} from '../constants';\n\nconst initialState = {\n  loading: false,\n  loaded: false,\n  error: null,\n  entities: {},\n};\n\nexport default function (state = initialState, action) {\n  const { type, id, error } = action;\n  const { entities } = state;\n\n  switch (type) {\n    case INCREMENT:\n      return {\n        ...state,\n        entities: { ...entities, [id]: (entities[id] || 0) + 1 },\n      };\n    case DECREMENT:\n      return {\n        ...state,\n        entities: {\n          ...entities,\n          [id]: entities[id] > 0 ? (entities[id] || 0) - 1 : 0,\n        },\n      };\n    case REMOVE:\n      return { ...state, entities: { ...entities, [id]: 0 } };\n    case CREATE_ORDER + REQUEST:\n      return { ...state, loading: true, error: null };\n    case CREATE_ORDER + SUCCESS:\n      return { ...state, loading: false, loaded: true, entities: {} };\n    case CREATE_ORDER + FAILURE:\n      return { ...state, loading: false, loaded: false, error };\n    default:\n      return state;\n  }\n}\n","export const arrToMap = (arr) =>\n  arr.reduce((acc, item) => ({ ...acc, [item.id]: item }), {});\n","import produce from 'immer';\nimport {\n  ADD_REVIEW,\n  CHANGE_RESTAURANT,\n  FAILURE,\n  LOAD_RESTAURANTS,\n  REQUEST,\n  SUCCESS,\n} from '../constants';\nimport { arrToMap } from '../utils';\n\nconst initialState = {\n  activeId: null,\n  loading: false,\n  loaded: false,\n  entities: {},\n  error: null,\n};\n\nexport default (state = initialState, action) => {\n  const { type, restId, reviewId, activeId, data, error } = action;\n\n  switch (type) {\n    case LOAD_RESTAURANTS + REQUEST:\n      return { ...state, loading: true, error: null };\n    case LOAD_RESTAURANTS + SUCCESS:\n      return {\n        ...state,\n        activeId: data[0].id,\n        entities: arrToMap(data),\n        loading: false,\n        loaded: true,\n      };\n    case LOAD_RESTAURANTS + FAILURE:\n      return {\n        ...state,\n        loading: false,\n        loaded: false,\n        error,\n      };\n    case CHANGE_RESTAURANT:\n      return { ...state, activeId };\n    case ADD_REVIEW:\n      return produce(state, (draft) => {\n        draft.entities[restId].reviews.push(reviewId);\n      });\n    default:\n      return state;\n  }\n};\n","import produce from 'immer';\nimport { arrToMap } from '../utils';\nimport { LOAD_PRODUCTS, REQUEST, SUCCESS, FAILURE } from '../constants';\n\nconst initialState = {\n  entities: {},\n  loading: {},\n  loaded: {},\n  error: null,\n};\n\nexport default (state = initialState, action) =>\n  produce(state, (draft) => {\n    const { type, restId, data, error } = action;\n\n    switch (type) {\n      case LOAD_PRODUCTS + REQUEST: {\n        draft.loading[restId] = true;\n        break;\n      }\n      case LOAD_PRODUCTS + SUCCESS: {\n        draft.loading[restId] = false;\n        draft.loaded[restId] = true;\n        draft.error = null;\n        Object.assign(draft.entities, arrToMap(data));\n        break;\n      }\n      case LOAD_PRODUCTS + FAILURE: {\n        draft.loading[restId] = false;\n        draft.loaded[restId] = false;\n        draft.error = error;\n        break;\n      }\n      default:\n        return;\n    }\n  });\n","import produce from 'immer';\nimport {\n  ADD_REVIEW,\n  REQUEST,\n  SUCCESS,\n  FAILURE,\n  LOAD_REVIEWS,\n} from '../constants';\nimport { arrToMap } from '../utils';\n\nconst initialState = {\n  entities: {},\n  loading: {},\n  loaded: {},\n  error: null,\n};\n\nexport default produce((draft = initialState, action) => {\n  const { type, review, reviewId, userId, restId, data, error } = action;\n\n  switch (type) {\n    case LOAD_REVIEWS + REQUEST: {\n      draft.error = null;\n      draft.loading[restId] = true;\n      break;\n    }\n    case LOAD_REVIEWS + SUCCESS: {\n      draft.loading[restId] = false;\n      draft.loaded[restId] = true;\n      Object.assign(draft.entities, arrToMap(data));\n      break;\n    }\n    case LOAD_REVIEWS + FAILURE: {\n      draft.loading[restId] = false;\n      draft.loaded[restId] = false;\n      draft.error = error;\n      break;\n    }\n    case ADD_REVIEW:\n      const { text, rating } = review;\n      draft.entities[reviewId] = { id: reviewId, userId, text, rating };\n      break;\n    default:\n      return draft;\n  }\n});\n","import produce from 'immer';\nimport {\n  ADD_REVIEW,\n  LOAD_USERS,\n  REQUEST,\n  SUCCESS,\n  FAILURE,\n} from '../constants';\nimport { arrToMap } from '../utils';\n\nconst initialState = {\n  entities: {},\n  loading: false,\n  loaded: false,\n  error: null,\n};\n\nexport default produce((draft = initialState, action) => {\n  const { type, review, userId, data, error } = action;\n\n  switch (type) {\n    case LOAD_USERS + REQUEST: {\n      draft.error = null;\n      draft.loading = true;\n      break;\n    }\n    case LOAD_USERS + SUCCESS: {\n      draft.loading = false;\n      draft.loaded = true;\n      draft.entities = arrToMap(data);\n      break;\n    }\n    case LOAD_USERS + FAILURE: {\n      draft.loading = false;\n      draft.loaded = false;\n      draft.error = error;\n      break;\n    }\n    case ADD_REVIEW:\n      const { name } = review;\n      draft.entities[userId] = { id: userId, name };\n      break;\n    default:\n      return draft;\n  }\n});\n","import { createBrowserHistory } from 'history';\n\nconst env = process.env.NODE_ENV;\nconst basename = env === 'development' ? '' : '/react-2021-10-08';\n\nconst history = createBrowserHistory({ basename });\n\nexport default history;\n","import { combineReducers } from 'redux';\nimport { connectRouter } from 'connected-react-router';\n\nimport order from './order';\nimport restaurants from './restaurants';\nimport products from './products';\nimport reviews from './reviews';\nimport users from './users';\n\nimport history from '../../history';\n\nexport default combineReducers({\n  router: connectRouter(history),\n  order,\n  restaurants,\n  products,\n  reviews,\n  users,\n});\n","import { applyMiddleware, createStore } from 'redux';\nimport thunk from 'redux-thunk';\nimport { routerMiddleware } from 'connected-react-router';\nimport { composeWithDevTools } from 'redux-devtools-extension';\n\nimport logger from './middleware/logger';\nimport generateId from './middleware/generateId';\nimport api from './middleware/api';\n\nimport reducer from './reducer';\nimport history from '../history';\n\nconst enhancer = applyMiddleware(\n  thunk,\n  routerMiddleware(history),\n  api,\n  generateId,\n  logger\n);\n\nexport default createStore(reducer, composeWithDevTools(enhancer));\n","import { v4 as uuid } from 'uuid';\n\nexport default (store) => (next) => (action) => {\n  if (!action.generateId) return next(action);\n\n  const { generateId, ...rest } = action;\n  next({\n    ...rest,\n    ...generateId.reduce((acc, key) => ({ ...acc, [key]: uuid() }), {}),\n  });\n};\n","export default (store) => (next) => (action) => {\n  // console.log('before: ', store.getState());\n  // console.log('action: ', action);\n  next(action);\n  // console.log('after: ', store.getState());\n};\n","import ReactDOM from 'react-dom';\nimport { Provider } from 'react-redux';\nimport { ConnectedRouter } from 'connected-react-router';\nimport './index.css';\n\nimport App from './components/app';\nimport { CurrencyProvider } from './contexts/currency-context';\nimport store from './redux/store';\nimport history from './history';\n\n// DEV ONLY!!!\nwindow.store = store;\n\nReactDOM.render(\n  <Provider store={store}>\n    <ConnectedRouter history={history}>\n      <CurrencyProvider>\n        <App />\n      </CurrencyProvider>\n    </ConnectedRouter>\n  </Provider>,\n  document.getElementById('root')\n);\n"],"sourceRoot":""}